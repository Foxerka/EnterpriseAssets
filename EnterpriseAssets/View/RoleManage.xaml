<Window x:Class="EnterpriseAssets.View.RoleManage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление ролью" Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F6FA">

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1.5*"/>
        </Grid.ColumnDefinitions>

        <!-- Левая часть: Редактирование роли -->
        <Border Grid.Column="0" Background="White" CornerRadius="10" Padding="20" Margin="0,0,10,0">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="2" BlurRadius="10" Opacity="0.1"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,20">
                    <TextBlock Text="🔑 Информация о роли" FontSize="20" FontWeight="Bold" Foreground="#2C3E50"/>
                    <TextBlock Text="Заполните данные для создания или редактирования" FontSize="12" Foreground="#7F8C8D" Margin="0,5,0,0"/>
                </StackPanel>

                <StackPanel Grid.Row="1" VerticalAlignment="Top">
                    <TextBlock Text="Название роли *" FontSize="13" FontWeight="SemiBold" Foreground="#34495E" Margin="0,0,0,5"/>
                    <TextBox x:Name="TxtRoleName" FontSize="14" Padding="10" Margin="0,0,0,15" BorderBrush="#E1E5EB" BorderThickness="1"/>

                    <TextBlock Text="Описание" FontSize="13" FontWeight="SemiBold" Foreground="#34495E" Margin="0,0,0,5"/>
                    <TextBox x:Name="TxtDescription" FontSize="14" Padding="10" Height="100" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" BorderBrush="#E1E5EB" BorderThickness="1"/>
                </StackPanel>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,0">
                    <Button x:Name="BtnDelete" Content="🗑️ Удалить" Background="#E74C3C" Foreground="White" Padding="5,8" Margin="00,0,10,0" BorderThickness="0" Cursor="Hand" Click="BtnDelete_Click"/>
                    <Button Content="❌ Отмена" Background="#95A5A6" Foreground="White" Padding="5,8" Margin="0,0,10,0" BorderThickness="0" Cursor="Hand" Click="BtnCancel_Click"/>
                    <Button Content="💾 Сохранить" Background="#27AE60" Foreground="White" Padding="5,8" BorderThickness="0" Cursor="Hand" Click="BtnSave_Click" IsDefault="True"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Правая часть: Список пользователей -->
        <Border Grid.Column="1" Background="White" CornerRadius="10" Padding="20" Margin="10,0,0,0">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="2" BlurRadius="10" Opacity="0.1"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,15">
                    <TextBlock Text="👥 Пользователи в роли" FontSize="20" FontWeight="Bold" Foreground="#2C3E50"/>
                    <TextBlock x:Name="TxtUsersCount" Text="0 пользователей" FontSize="12" Foreground="#7F8C8D" Margin="0,5,0,0"/>
                </StackPanel>

                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="UsersInRoleList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#F8F9FA" BorderBrush="#E1E5EB" BorderThickness="1" CornerRadius="6" Padding="10" Margin="0,0,0,8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <Border Grid.Column="0" Width="40" Height="40" CornerRadius="20" Background="#4A6FA5" Margin="0,0,10,0">
                                            <TextBlock Text="{Binding Path=full_name}" Foreground="White" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                                        </Border>

                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding full_name}" FontSize="14" FontWeight="SemiBold" Foreground="#2C3E50"/>
                                            <TextBlock Text="{Binding username}" FontSize="11" Foreground="#7F8C8D"/>
                                        </StackPanel>

                                        <TextBlock Grid.Column="2" Text="✉️" FontSize="16" VerticalAlignment="Center" ToolTip="{Binding email}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>