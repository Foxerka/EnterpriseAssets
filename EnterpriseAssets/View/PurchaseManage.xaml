<Window x:Class="EnterpriseAssets.View.PurchaseManage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление закупкой" 
        Height="750" Width="700"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F7FA">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 🔹 Заголовок -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock x:Name="WindowTitle" 
                       Text="Новая закупка оборудования" 
                       FontSize="24" 
                       FontWeight="SemiBold" 
                       Foreground="#2C3E50"/>
            <TextBlock Text="Создание заказа на оборудование у поставщика" 
                       FontSize="12" 
                       Foreground="#7F8C8D"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- 🔹 Контент -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0,0,0,15">
            <StackPanel>
                <!-- 📋 Раздел 1: Оборудование и поставщик -->
                <Border Background="White" BorderBrush="#E1E5EB" BorderThickness="1" 
                        CornerRadius="8" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="📋 Оборудование и поставщик" FontSize="14" FontWeight="SemiBold" 
                                   Foreground="#2C3E50" Margin="0,0,0,12"/>

                        <TextBlock Text="Актив *" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                        <ComboBox x:Name="CmbEquipment" Padding="10,8" Margin="0,0,0,12"
          SelectionChanged="CmbEquipment_SelectionChanged"/>
                        <TextBlock Text="Какой актив закупается (оборудование, материалы, запчасти)" 
           FontSize="11" Foreground="#95A5A6" FontStyle="Italic"/>

                        <TextBlock Text="Поставщик *" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                        <ComboBox x:Name="CmbSupplier" Padding="10,8" Margin="0,0,0,5"/>
                        <TextBlock Text="У кого закупается оборудование" FontSize="11" Foreground="#95A5A6" FontStyle="Italic"/>
                    </StackPanel>
                </Border>

                <!-- 💰 Раздел 2: Стоимость и количество -->
                <Border Background="White" BorderBrush="#E1E5EB" BorderThickness="1" 
                        CornerRadius="8" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="💰 Стоимость и количество" FontSize="14" FontWeight="SemiBold" 
                                   Foreground="#2C3E50" Margin="0,0,0,12"/>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Количество *" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                                <TextBox x:Name="TxtQuantity" Padding="10,8" BorderBrush="#BDC3C7"
                                         TextChanged="TxtQuantityOrPrice_TextChanged"
                                         PreviewTextInput="TxtNumber_PreviewTextInput"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Цена за единицу *" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                                <TextBox x:Name="TxtUnitPrice" Padding="10,8" BorderBrush="#BDC3C7"
                                         TextChanged="TxtQuantityOrPrice_TextChanged"
                                         PreviewTextInput="TxtDecimal_PreviewTextInput"/>
                            </StackPanel>
                        </Grid>

                        <Border Background="#E8F6F3" BorderBrush="#27AE60" BorderThickness="1" 
                                CornerRadius="4" Padding="10">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="💵 Итого: " FontWeight="SemiBold" Foreground="#2C3E50"/>
                                <TextBlock x:Name="TxtTotalCost" Text="0 ₽" 
                                           FontSize="16" FontWeight="Bold" Foreground="#27AE60"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- 📅 Раздел 3: Сроки -->
                <Border Background="White" BorderBrush="#E1E5EB" BorderThickness="1" 
                        CornerRadius="8" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="📅 Сроки поставки" FontSize="14" FontWeight="SemiBold" 
                                   Foreground="#2C3E50" Margin="0,0,0,12"/>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Дата заказа" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                                <DatePicker x:Name="DpOrderDate" Padding="8,6" BorderBrush="#BDC3C7"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Ожидаемая доставка" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                                <DatePicker x:Name="DpExpectedDelivery" Padding="8,6" BorderBrush="#BDC3C7"/>
                            </StackPanel>
                        </Grid>

                        <TextBlock Text="Фактическая доставка" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                        <DatePicker x:Name="DpActualDelivery" Padding="8,6" BorderBrush="#BDC3C7"/>
                    </StackPanel>
                </Border>

                <!-- 👤 Раздел 4: Ответственные и статус -->
                <Border Background="White" BorderBrush="#E1E5EB" BorderThickness="1" 
                        CornerRadius="8" Padding="15" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="👤 Ответственные и статус" FontSize="14" FontWeight="SemiBold" 
                                   Foreground="#2C3E50" Margin="0,0,0,12"/>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Менеджер по закупкам" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                                <ComboBox x:Name="CmbManager" Padding="8,6"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Статус закупки" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                                <ComboBox x:Name="CmbStatus" Padding="8,6"/>
                            </StackPanel>
                        </Grid>

                        <TextBlock Text="Примечания" Foreground="#5D6D7E" Margin="0,0,0,5"/>
                        <TextBox x:Name="TxtNotes" Padding="10,8" BorderBrush="#BDC3C7" 
                                 TextWrapping="Wrap" AcceptsReturn="True" Height="60" 
                                 VerticalContentAlignment="Top"/>
                    </StackPanel>
                </Border>

                <!-- 🕐 Дата создания (только просмотр) -->
                <Border x:Name="CreatedAtSection" Background="#F8F9FA" BorderBrush="#E1E5EB" 
                        BorderThickness="1" CornerRadius="6" Padding="12" Margin="0,0,0,5"
                        Visibility="Collapsed">
                    <TextBlock x:Name="TxtCreatedAt" Text="Создано: " Foreground="#7F8C8D" FontSize="12"/>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- 🔹 Кнопки -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="BtnDelete" Content="🗑️ Удалить" Background="#E74C3C" Foreground="White"
                    Padding="15,8" BorderThickness="0" Cursor="Hand" Margin="0,0,10,0"
                    Click="BtnDelete_Click"/>
            <Button x:Name="BtnCancel" Content="Отмена" Background="#95A5A6" Foreground="White"
                    Padding="20,8" BorderThickness="0" Cursor="Hand" Margin="0,0,10,0"
                    Click="BtnCancel_Click"/>
            <Button x:Name="BtnSave" Content="💾 Сохранить" Background="#27AE60" Foreground="White"
                    Padding="20,8" BorderThickness="0" Cursor="Hand" Click="BtnSave_Click"/>
        </StackPanel>
    </Grid>
</Window>